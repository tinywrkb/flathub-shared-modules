{
    "name": "pyqt5",
    "config-opts": [
        "--concatenate=1",
        "--confirm-license",
        "--enable=QtCore",
        "--enable=QtDBus",
        "--enable=QtGui",
        "--enable=QtNetwork",
        "--enable=QtOpenGL",
        "--enable=QtPrintSupport",
        "--enable=QtQml",
        "--enable=QtQuick",
        "--enable=QtSql",
        "--enable=QtTest",
        "--enable=QtWebChannel",
        "--enable=QtWidgets",
        "--no-designer-plugin",
        "--no-docstrings",
        "--no-make",
        "--no-qml-plugin",
        "--no-tools",
        "--api-dir=/app/share/qt/qsci/api/python",
        "--qmake-setting=QMAKE_CFLAGS_RELEASE='-I/usr/include/python3.8/'",
        "--qmake-setting=QMAKE_CXXFLAGS_RELEASE='-I/usr/include/python3.8/'",
        "--qt-shared"
    ],
    "make-args": [
        "--directory=build"
    ],
    "make-install-args": [
        "--directory=build"
    ],
    "sources": [
        {
            "type": "archive",
            "url": "https://files.pythonhosted.org/packages/8e/a4/d5e4bf99dd50134c88b95e926d7b81aad2473b47fde5e3e4eac2c69a8942/PyQt5-5.15.4.tar.gz",
            "sha256": "2a69597e0dd11caabe75fae133feca66387819fc9bc050f547e5551bce97e5be",
            "x-checker-data": {
                "type": "pypi",
                "name": "PyQt5"
            }
        },
        {
            "type": "script",
            "commands": [
                "processed=`sed -e 's|prefix=/app|target-dir=/app/lib/python3.8/site-packages|' <<< $@`",
                "sip-build $processed",
                "echo 'trick flatpak-builder into running make' > Makefile"
            ],
            "dest-filename": "configure"
        },
        {
            "type": "shell",
            "commands": [
                "echo '[tool.sip.bindings.QtGui]' >> pyproject.toml",
                "echo 'disabled-features = [\"PyQt_Desktop_OpenGL\"]' >> pyproject.toml"
            ],
            "only-arches": [
                "aarch64"
            ]
        }
    ],
    "cleanup": [
        "/share/sip",
        /* removing qsci (qscintilla api)*/
        "/share/qt"
    ],
    "modules": [
        "../dbus-python/dbus-python.json",
        "../python-opengl/python-opengl.json",
        {
            "name": "sip",
            "buildsystem": "simple",
            "build-commands": [
                "python setup.py build",
                "python setup.py install --skip-build --prefix=/app --root=/ --optimize=1"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/f8/b2/fcd5e964eefce0737512fb4ea263308769c671c3b1b9b1e380a5008ffef0/sip-6.1.1.tar.gz",
                    "sha256": "52d25af2fcd764c4e15cc9cd1350bdb0e63f52dfa2aa3c5e7679af7fde9f7e20",
                    "x-checker-data": {
                        "type": "pypi",
                        "name": "sip"
                    }
                }
            ],
            "cleanup": [
                "/bin"
            ],
            "modules": [
                {
                    "name": "python-pyparsing",
                    "buildsystem": "simple",
                    "build-commands": [
                        "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"pyparsing\" --no-build-isolation"
                    ],
                    "sources": [
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/c1/47/dfc9c342c9842bbe0036c7f763d2d6686bcf5eb1808ba3e170afdb282210/pyparsing-2.4.7.tar.gz",
                            "sha256": "c203ec8783bf771a155b207279b9bccb8dea02d8f0c9e5f8ead507bc3246ecc1",
                            "x-checker-data": {
                                "type": "pypi",
                                "name": "pyparsing"
                            }
                        }
                    ]
                },
                {
                    "name": "python-packaging",
                    "buildsystem": "simple",
                    "build-commands": [
                        "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"packaging\" --no-build-isolation"
                    ],
                    "sources": [
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/86/3c/bcd09ec5df7123abcf695009221a52f90438d877a2f1499453c6938f5728/packaging-20.9.tar.gz",
                            "sha256": "5b327ac1320dc863dca72f4514ecc086f31186744b84a230374cc1fd776feae5",
                            "x-checker-data": {
                                "type": "pypi",
                                "name": "packaging"
                            }
                        }
                    ]
                },
                {
                    "name": "python-toml",
                    "buildsystem": "simple",
                    "build-commands": [
                        "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"toml\" --no-build-isolation"
                    ],
                    "sources": [
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/be/ba/1f744cdc819428fc6b5084ec34d9b30660f6f9daaf70eead706e3203ec3c/toml-0.10.2.tar.gz",
                            "sha256": "b3bda1d108d5dd99f4a20d24d9c348e91c4db7ab1b749200bded2f839ccbe68f",
                            "x-checker-data": {
                                "type": "pypi",
                                "name": "toml"
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "pyqt-builder",
            "buildsystem": "simple",
            "build-commands": [
                "python setup.py build",
                "python setup.py install --skip-build --prefix=/app --root=/ --optimize=1"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/00/a4/67939cced6487b1856dfda5cafa4e7eb179df917f4964918a202c8ba46d3/PyQt-builder-1.10.1.tar.gz",
                    "sha256": "967b0c7bac0331597e9f8c5b336660f173a9896830b721d6d025e14bde647e17",
                    "x-checker-data": {
                        "type": "pypi",
                        "name": "PyQt-builder"
                    }
                }
            ],
            "cleanup": [
                "*"
            ]
        },
        {
            "name": "pyqt5-sip",
            "buildsystem": "simple",
            "build-commands": [
                "python setup.py build",
                "python setup.py install --skip-build --prefix=/app --root=/ --optimize=1"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/b1/40/dd8f081f04a12912b65417979bf2097def0af0f20c89083ada3670562ac5/PyQt5_sip-12.9.0.tar.gz",
                    "sha256": "d3e4489d7c2b0ece9d203ae66e573939f7f60d4d29e089c9f11daa17cfeaae32",
                    "x-checker-data": {
                        "type": "pypi",
                        "name": "PyQt5-sip"
                    }
                }
            ]
        }
    ]
}
